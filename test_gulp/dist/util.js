function getSyncMessage(a,i){var s="您的数据同步请求已加入到任务列表里，请稍后查看状态通知！";switch(a){case"fetchresumes":case"fetchresume":s="您的简历导入请求已加入到任务列表里，请稍后查看状态通知！";break;case"fetchcompany":s="您的公司信息下载请求已加入到任务列表里，请稍后查看状态通知！";break;case"renewjobs":s="您的职位刷新请求已加入到任务列表里，请稍后查看状态通知！"}return s}function startSync(a,i,s,t,e){var o={keyboard:!1},d=getMaxZIndex(".popover"),n=$("#accountsetdialog_"+a);n.length<=0&&(n=$('<div id="accountsetdialog_'+a+'" class="modal accountsetdialog"></div>').appendTo("body")).on("show.bs.modal",function(){d>0&&$(this).css("z-index",d+1)}),n.data("type",a).off("hidden.bs.modal"),n.html('<div class="modal-header"><h3 class="title">'+thirdsitenames[a]+'</h3></div><div class="modal-body"><div style="text-align:center; padding: 30px 40px"><div class="green">正在提取登录信息...<br><br></div><img src="/images/3/blue-loading.gif"></div></div>'),n.addClass("keepopen").modal(o).modal("show"),n.data("bs.modal").isShown=!1,$.ajax({type:"POST",url:OC.filePath("company","ajax","getsyncaccountinfo.php"),data:i,dataType:"html",beforeSend:function(a,i){},success:function(o){if("task-add-to-background"==o){if($(document).trigger("remote_login_success",thirdsitenames[a]),n.data("bs.modal").isShown=!0,n.on("hidden.bs.modal",function(a){$.isFunction(e)&&e()}),n.modal("hide"),"fetchjobs"==i.syncaction)showNotifyDialog(i.autofetchon,i.vid,a);else if("autofetchjobs"==i.syncaction||"autorenewjobs"==i.syncaction)$("#"+i.syncaction+"_result_"+a).children(".hdbtn").removeClass("hdbtn_notok").addClass("hdbtn hdbtn_ok"),$("#"+i.syncaction+"_result_"+a).data("loginstatus",1);else{d=getSyncMessage(i.syncaction?i.syncaction:"",a);OC.Notification.show(d,5e3)}$("#psysnotify").trigger("showtask"),$.isFunction(s)&&s(!0)}else if("hidden-task-add-to-background"==o){n.data("bs.modal").isShown=!0,n.modal("hide");d="";OC.Notification.show(d,5e3),$("#psysnotify").trigger("showtask"),$.isFunction(s)&&s(!0)}else if("login-success"==o||"trylogin-success"==o){n.data("bs.modal").isShown=!0;var d='<div class="success large">'+("login-success"==o?"登录成功！":"登录状态良好！")+"<br><br>";n.find(".modal-body>div").html(d),setTimeout(function(){n.modal("hide"),$.isFunction(s)&&s()},2e3),$.isFunction(e)&&n.on("hidden.bs.modal",function(){e()})}else n.data("bs.modal").isShown=!0,n.removeClass("keepopen").html(o).modal("show"),$("label.key",n).each(function(a,i){beautifyTableCaption(i)}),$.isFunction($.fn.placeholder)&&jQuery("input, textarea",n).placeholder(),$.isFunction(t)&&t(),i.dataaction&&n.data("dataaction",i.dataaction),i.autofetchon&&n.data("autofetchon",i.autofetchon),i.vid&&n.data("vid",i.vid),$.isFunction(s)&&n.data("taskaddedcb",s),n.on("hidden.bs.modal",function(){n.data("submitted")||$.isFunction(s)&&s(!1),$.isFunction(e)&&e()})}})}function showNotifyDialog(a,i,s){var t=!i||storageGet("autofetchjobs_showdialog_"+s)==i||1==a,e='<div class="modal-header">';e+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>',e+='<h3 id="myModalLabel">&nbsp;</h3>',e+="</div>",e+='<div class="modal-body">',e+='<div class="wrap_content">',e+='<div class="greenwords yahei clearfix">',e+='<i class="pull-left" style="margin-left:40px;"></i>',e+='<div class="pull-left" style="margin-left:10px;">',e+='<div class="sync_nowing '+t+'">职位获取中</div>',t?e+="":(e+='<label class="checkbox medium gray" style="padding-top:0px; text-align:left; color:#d2871d; display:none;">',e+='<input name="noaskagain" data-syncaction="autofetchjobs" data-synctype="'+s+'" data-vid="'+i+'" type="checkbox" checked="checked"/>每3天为您自动获取',e+="</label>"),e+="</div>",e+="</div>",e+='<div class="sync_redtexttips medium songti">点击顶部“消息-任务通知”可查看进度</div>',e+='<div class="greybakwrap" style="margin-bottom:30px;">',e+='<div class="tipgraywords medium gray">每3天为您自动获取，可在账户设置中关闭此服务</div>',e+="</div>",e+="</div>",e+="</div>",$("#autofetchjobs").html(e).modal()}function showStatusDialog(a,i){$("#send_status_dialog").length<=0&&$("body").append('<div class="modal interviewtime_dialog send_status_dialog" id="send_status_dialog" style="position:absolute;"><div class="modal-header" style="background:none; border-bottom:0px;"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button></div><div class="modal-body"><div class="wrap_content"><div class="greenwords yahei"><i></i>'+a+"</div></div></div></div>");var s=$(window).scrollTop();$("#send_status_dialog").css({top:s+75}).modal(),jQuery.isFunction(i)&&$("#send_status_dialog").on("hidden.bs.modal",function(){i()})}function resizeAppHeight(){var a,i=$(".wrapper").height(),s=$(window).height();a=i>=s?i:s,$(window).width()<=1233?a>=630?$("#apps").height(a+10):$("#apps").height(630):$("#apps").height("100%")}function showAutoResultDialog(a,i,s,t){var e="";if("string"==typeof s)switch(e="close"==i?"关闭":"开启",s){case"zhilian":e+="智联招聘";break;case"51job":e+="前程无忧";break;case"lagou":e+="拉勾";break;case"jiancai":e+="建筑英才";break;case"linkedin":e+="领英";break;case"58tc":e+="58同城"}else if("object"==typeof s){e="设置";var o=[];if($.each(s,function(a,i){"zhilian"==i?o.push("智联招聘"):"jiancai"==i?o.push("建筑英才"):"lagou"==i?o.push("拉勾"):"51job"==i?o.push("前程无忧"):"linkedin"==i?o.push("领英"):"58tc"==i&&o.push("58同城")}),o.length<=0)return;e+=o.join("，")}if(!((e+="autofetchjobs"==t?"自动获取":"自动刷新").length<=0||a.length<=0)){var d='<div class="modal-header">';d+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>',d+='<h3 id="myModalLabel">&nbsp;</h3>',d+="</div>",d+='<div class="modal-body">',d+='<div class="wrap_content">',d+='<div class="greenwords yahei"><i></i>您已成功'+e+"</div>","object"==typeof s&&(d+='<div class="tipgraywords">您可在账户设置中的 <a href="'+synchronousinfo_url+'">授权管理</a> 页面关闭或启用自动刷新</div>'),d+="</div>",d+="</div>",a.html(d).modal()}}var thirdsitenames={"51job":"前程无忧",zhilian:"智联招聘",jiancai:"建筑英才",lagou:"拉勾",linkedin:"领英","58tc":"58同城",chinahr:"中华英才",liepin:"猎聘"};